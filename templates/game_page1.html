{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="game-page" style="min-height: 100vh !important; padding-bottom: 2rem !important;">
        <div class="team-header">
            <h1 style="font-size: 1.5rem !important; font-weight: 800 !important; margin: 0 !important;">ğŸ† {{ data.team_name }}</h1>
        </div>

        <div class="team-info" style="display: grid !important; grid-template-columns: repeat(3, 1fr) !important; gap: 0.8rem !important; margin: 1.5rem 0 !important;">
            <div class="info-card" style="background: var(--bg-card) !important; border-radius: 12px !important; padding: 1.5rem 1rem !important; box-shadow: var(--shadow-md) !important; text-align: center !important; min-height: 110px !important; display: flex !important; flex-direction: column !important; justify-content: center !important;">
                <div class="info-label" style="font-size: 2rem !important; margin-bottom: 0.5rem !important;">ğŸ“Š</div>
                <div class="info-value" style="font-size: 1rem !important; font-weight: 600 !important;">{{ data.division }}</div>
            </div>
            <div class="info-card" style="background: var(--bg-card) !important; border-radius: 12px !important; padding: 1.5rem 1rem !important; box-shadow: var(--shadow-md) !important; text-align: center !important; min-height: 110px !important; display: flex !important; flex-direction: column !important; justify-content: center !important;">
                <div class="info-label" style="font-size: 2rem !important; margin-bottom: 0.5rem !important;">ğŸ“…</div>
                <div class="info-value" style="font-size: 1rem !important; font-weight: 600 !important;">Ğ¢ÑƒÑ€ {{ data.current_round }}</div>
            </div>
            <div class="info-card" style="background: var(--bg-card) !important; border-radius: 12px !important; padding: 1.5rem 1rem !important; box-shadow: var(--shadow-md) !important; text-align: center !important; min-height: 110px !important; display: flex !important; flex-direction: column !important; justify-content: center !important;">
                <div class="info-label" style="font-size: 2rem !important; margin-bottom: 0.5rem !important;">ğŸ“</div>
                <div class="info-value" style="font-size: 1rem !important; font-weight: 600 !important;">#{{ data.position }}</div>
            </div>
            <div class="info-card" style="background: var(--bg-card) !important; border-radius: 12px !important; padding: 1.5rem 1rem !important; box-shadow: var(--shadow-md) !important; text-align: center !important; min-height: 110px !important; display: flex !important; flex-direction: column !important; justify-content: center !important;">
                <div class="info-label" style="font-size: 2rem !important; margin-bottom: 0.5rem !important;">â­</div>
                <div class="info-value" style="font-size: 1rem !important; font-weight: 600 !important;">{{ data.points }}</div>
            </div>
            <div class="info-card" style="background: var(--bg-card) !important; border-radius: 12px !important; padding: 1.5rem 1rem !important; box-shadow: var(--shadow-md) !important; text-align: center !important; min-height: 110px !important; display: flex !important; flex-direction: column !important; justify-content: center !important;">
                <div class="info-label" style="font-size: 2rem !important; margin-bottom: 0.5rem !important;">ğŸŸï¸</div>
                <div class="info-value" style="font-size: 0.9rem !important; font-weight: 600 !important;">{{ data.stadium }}</div>
            </div>
            <div class="info-card" style="background: var(--bg-card) !important; border-radius: 12px !important; padding: 1.5rem 1rem !important; box-shadow: var(--shadow-md) !important; text-align: center !important; min-height: 110px !important; display: flex !important; flex-direction: column !important; justify-content: center !important;">
                <div class="info-label" style="font-size: 2rem !important; margin-bottom: 0.5rem !important;">ğŸ’°</div>
                <div class="info-value" style="font-size: 1rem !important; font-weight: 600 !important;">Â£{{ "{:,.0f}".format(data.finances / 1000) }}k</div>
            </div>
        </div>

        <div class="next-match" style="background: linear-gradient(135deg, var(--primary-color), var(--light-blue)) !important; border-radius: 16px !important; padding: 2rem 1.5rem !important; margin: 2rem 0 !important; text-align: center !important; color: white !important; box-shadow: var(--shadow-md) !important;">
            <h3 style="font-size: 1.8rem !important; font-weight: 800 !important; margin: 0 0 0.5rem 0 !important;">âš½ {{ data.next_opponent }}</h3>
            <p style="font-size: 1rem !important; opacity: 0.95 !important; margin: 0 !important; font-weight: 500 !important;">
                {% if data.is_home_match %}ğŸ  Ğ”Ğ¾Ğ¼Ğ°{% else %}âœˆï¸ Ğ’ Ğ³Ğ¾ÑÑ‚ÑÑ…{% endif %} â€¢ Ğ¢ÑƒÑ€ {{ data.current_round }}/38
            </p>
        </div>

        <div class="action-buttons" style="display: grid !important; grid-template-columns: repeat(2, 1fr) !important; grid-template-rows: repeat(2, 1fr) !important; gap: 0.8rem !important; margin: 2rem 0 !important;">
            <a href="{{ url_for('pre_match') }}" class="btn btn-success" style="padding: 1.2rem 1rem !important; font-size: 1rem !important; font-weight: 700 !important; border-radius: 12px !important;">
                ğŸ® ĞœĞ°Ñ‚Ñ‡
            </a>
            <button class="btn btn-primary" onclick="saveGame()" style="padding: 1.2rem 1rem !important; font-size: 1rem !important; font-weight: 700 !important; border-radius: 12px !important;">
                ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€.
            </button>
            <a href="{{ url_for('game_page', page=2) }}" class="btn btn-info" style="padding: 1.2rem 1rem !important; font-size: 1rem !important; font-weight: 700 !important; border-radius: 12px !important;">
                ğŸ“Š Ğ¢Ğ°Ğ±Ğ».
            </a>
            <a href="{{ url_for('index') }}" class="btn btn-danger" style="padding: 1.2rem 1rem !important; font-size: 1rem !important; font-weight: 700 !important; border-radius: 12px !important;">
                ğŸšª Ğ’Ñ‹Ñ…Ğ¾Ğ´
            </a>
        </div>
        
        <div class="page-navigation">
            <a href="{{ url_for('game_page', page=5) }}" class="nav-btn">â—€ ĞĞ°Ğ·Ğ°Ğ´</a>
            <span class="page-indicator">ğŸ“„ 1/5</span>
            <a href="{{ url_for('game_page', page=2) }}" class="nav-btn">Ğ’Ğ¿ĞµÑ€Ñ‘Ğ´ â–¶</a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function saveGame() {
    fetch('{{ url_for("save_game") }}', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('âœ… ' + data.message);
        } else {
            alert('âŒ ' + data.message);
        }
    })
    .catch(error => {
        alert('âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğ¸ Ğ¸Ğ³Ñ€Ñ‹');
    });
}
</script>
{% endblock %}

